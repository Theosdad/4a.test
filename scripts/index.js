var f=document.getElementById("modal"),y=document.querySelectorAll(".modal-close"),m=()=>{f.style.display="block"},L=()=>{f.style.display="none"};y.forEach(t=>t.addEventListener("click",L));var T=async()=>{try{let t=await fetch("https://t-pay.iqfit.app/subscribe/list-test");if(!t.ok)throw new Error("Failed to fetch data");return await t.json()}catch{throw new Error("Failed to fetch data")}},d=T();var u=t=>{let s=document.querySelectorAll(".tariff-list__insert"),i=document.querySelectorAll(".modal__name"),r=document.querySelectorAll(".modal__price"),n=t.filter(e=>e.isDiscount===!0&&e.isPopular===!1),o=["-40%","-50%","-60%"];s.forEach((e,c)=>{if(c<t.length){let a=t[c];if(a.isDiscount===!1&&a.isPopular===!0){let l=`
          <h2 class="tariff-name">${a.name}</h2>
          <span class="tariff-price">${a.price}\u20BD</span>
        `;e.insertAdjacentHTML("beforeend",l)}}}),n.forEach((e,c)=>{if(c<i.length){let a=`<h2>${e.name}</h2>`;i[c].insertAdjacentHTML("beforeend",a);let l=`<p class="modal__new-price" data-discount="${o[c]}">${e.price}\u20BD</p>`;r[c].insertAdjacentHTML("beforeend",l)}})},p=t=>{let s=t.filter(r=>r.isDiscount===!1&&r.isPopular===!1);document.querySelectorAll(".tariff-list__insert").forEach((r,n)=>{if(n<s.length){let o=s[n],e=`
          <h2 class="tariff-name">${o.name}</h2>
          <span class="tariff-price">${o.price}\u20BD</span>
        `;r.innerHTML="",r.insertAdjacentHTML("beforeend",e)}})};var h=()=>{document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelector(".timer"),s=document.getElementById("minutes"),i=document.getElementById("seconds"),r=document.querySelectorAll(".tariff-list__item"),n=2,o=0,e=()=>{s.textContent=n.toString().padStart(2,"0"),i.textContent=o.toString().padStart(2,"0")},a=setInterval(()=>{if(n===0&&o===0&&(clearInterval(a),r.forEach(l=>{l.classList.add("no-discount")}),d.then(l=>{p(l)}),m()),n===0&&o===30&&t.classList.toggle("expired"),o===0){if(n===0){clearInterval(a);return}n--,o=59}else o--;e()},1e3);e()})};h();d.then(t=>{u(t)});document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelectorAll(".tariff-item");t.forEach(s=>{s.addEventListener("click",()=>{t.forEach(i=>{i.classList.remove("selected")}),s.classList.add("selected")})})});
